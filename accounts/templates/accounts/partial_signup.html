{% load i18n %}

<div class="section-card">

  <div class="form-section">  
  
    <div class="section-header">
        <h3 class="section-title">{% trans "Venue Owner" %}</h3>
        <p class="section-subtitle">{% trans "Owner account details (used to create your venue admin account)." %}</p>
    </div>

    <div class="section-body">
        
        
        {# --- 1. Admin Username --- #}
        <div class="form-group">
            {% with field=form.admin_username %}
            <label for="{{ field.id_for_label }}">
                {% trans field.label %}
                {% if field.field.required %}<span class="text-danger">*</span>{% endif %}
            </label>

            {{ field }}

            <div class="field-error-slot" id="err-{{ field.id_for_label }}">
                {% if field.errors %}
                  <ul class="errorlist">
                      {% for error in field.errors %}
                        <li>{{ error }}</li>
                      {% endfor %}
                  </ul>
                {% else %}
                  <ul class="errorlist" style="visibility:hidden;">
                      <li>&nbsp;</li>
                  </ul>
                {% endif %}
            </div>
            {% endwith %}
        </div>

        {# --- 2. Admin First Name --- #}
        <div class="form-group">
            {% with field=form.admin_firstname %}
            <label for="{{ field.id_for_label }}">
                {% trans field.label %}
                {% if field.field.required %}<span class="text-danger">*</span>{% endif %}
            </label>

            {{ field }}

            <div class="field-error-slot" id="err-{{ field.id_for_label }}">
                {% if field.errors %}
                <ul class="errorlist">
                    {% for error in field.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                {% else %}
                <ul class="errorlist" style="visibility:hidden;">
                    <li>&nbsp;</li>
                </ul>
                {% endif %}
            </div>
            {% endwith %}
        </div>

        
        {# --- 2. Admin Last Name --- #}
        <div class="form-group">
            {% with field=form.admin_lastname %}
            <label for="{{ field.id_for_label }}">
                {% trans field.label %}
                {% if field.field.required %}<span class="text-danger">*</span>{% endif %}
            </label>

            {{ field }}

            <div class="field-error-slot" id="err-{{ field.id_for_label }}">
                {% if field.errors %}
                <ul class="errorlist">
                    {% for error in field.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                {% else %}
                <ul class="errorlist" style="visibility:hidden;">
                    <li>&nbsp;</li>
                </ul>
                {% endif %}
            </div>
            {% endwith %}
        </div>

        {# --- Admin Phone --- #}
        <div class="form-group">
            {% with field=form.admin_phone %}
            <label for="{{ field.id_for_label }}">
                {% trans field.label %}
                {% if field.field.required %}<span class="text-danger">*</span>{% endif %}
            </label>

            {{ field }}

            <div class="field-error-slot" id="err-{{ field.id_for_label }}">
                {% if field.errors %}
                <ul class="errorlist">
                    {% for error in field.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                {% else %}
                <ul class="errorlist" style="visibility:hidden;">
                    <li>&nbsp;</li>
                </ul>
                {% endif %}
            </div>
            {% endwith %}
        </div>

        {# --- Admin Email + verifier --- #}
        <div class="form-group email-verify-wrapper">
            {% with field=form.admin_email %}
            <label for="{{ field.id_for_label }}">
                {% trans field.label %}
                {% if field.field.required %}<span class="text-danger">*</span>{% endif %}
            </label>

            {{ field }}

            <div class="verify-row">
                <button type="button"
                        class="btn btn-secondary {% if email_verified %}is-verified{% endif %}"
                        id="openVerifyPopover"
                        {% if email_verified %}disabled{% endif %}>
                {% if email_verified %}
                    {% trans "Verified" %}
                {% else %}
                    {% trans "Verify Email" %}
                {% endif %}
                </button>
            </div>

            <div id="verifyPopover" class="verify-popover" aria-hidden="true">
                <div class="verification-container">
                <button type="button"
                        class="verify-close-x"
                        id="closeVerifyPopover"
                        aria-label="{% trans 'Close' %}">Ã—</button>

                <h2 style="font-size:1.15rem; margin-bottom:6px;">{% trans "Verify Your Email" %}</h2>
                <p style="margin:0 0 10px 0;">{% trans "Enter the 6-digit code sent to your email." %}</p>

                <div id="verifyMsg" class="verify-msg" role="status" aria-live="polite"></div>

                <div class="verification-form">
                    <input type="text"
                        id="codeInput"
                        name="code"
                        maxlength="6"
                        inputmode="numeric"
                        autocomplete="one-time-code"
                        placeholder="{% trans 'Enter 6-digit code' %}">
                </div>

                <div class="verify-actions">
                    <button type="button" class="resend-button" id="sendCodeBtn">
                    {% trans "Send Code" %}
                    </button>
                    <button type="button" id="verifyCodeBtn">
                    {% trans "Verify" %}
                    </button>
                </div>
                </div>
            </div>

            <div class="field-error-slot" id="err-{{ field.id_for_label }}">
                {% if field.errors %}
                <ul class="errorlist">
                    {% for error in field.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                {% else %}
                <ul class="errorlist" style="visibility:hidden;">
                    <li>&nbsp;</li>
                </ul>
                {% endif %}
            </div>
            {% endwith %}
        </div>

        {# --- Password 1 --- #}
        <div class="form-group">
            {% with field=form.password1 %}
            <label for="{{ field.id_for_label }}">
                {% trans field.label %}
                {% if field.field.required %}<span class="text-danger">*</span>{% endif %}
            </label>

            {{ field }}

            <div class="field-error-slot" id="err-{{ field.id_for_label }}">
                {% if field.errors %}
                <ul class="errorlist">
                    {% for error in field.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                {% else %}
                <ul class="errorlist" style="visibility:hidden;">
                    <li>&nbsp;</li>
                </ul>
                {% endif %}
            </div>
            {% endwith %}
        </div>

        {# --- Password 2 --- #}
        <div class="form-group">
            {% with field=form.password2 %}
            <label for="{{ field.id_for_label }}">
                {% trans field.label %}
                {% if field.field.required %}<span class="text-danger">*</span>{% endif %}
            </label>

            {{ field }}

            <div class="field-error-slot" id="err-{{ field.id_for_label }}">
                {% if field.errors %}
                <ul class="errorlist">
                    {% for error in field.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                {% else %}
                <ul class="errorlist" style="visibility:hidden;">
                    <li>&nbsp;</li>
                </ul>
                {% endif %}
            </div>
            {% endwith %}
        </div>
    </div>
  </div>
</div>