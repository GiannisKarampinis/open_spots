{% load i18n %}
{% load date_filters %}

<tr id="reservation-row-{{ r.id }}" data-reservation-id="{{ r.id }}">
  <td>{{ r.full_name }}</td>

  <!-- Date -->
  <td data-order="{{ r.date|date:'Y-m-d' }}">{{ r.date|format_date_display }}</td>

  <!-- Time -->
  <td data-order="{{ r.time|time:'H:i' }}">{{ r.time|format_time_display }}</td>

  <td>{{ r.guests }}</td>

  <td>
    <span class="badge 
      {% if   r.status == 'pending' %}bg-warning text-dark
      {% elif r.status == 'accepted' %}bg-success
      {% else %}bg-danger
      {% endif %}
    ">
      {% if r.status == 'pending' %}
        {% trans "Pending" %}
      {% elif r.status == 'accepted' %}
        {% trans "Accepted" %}
      {% elif r.status == 'rejected' %}
        {% trans "Rejected" %}
      {% else %}
        {% trans "Unknown" %}        
      {% endif %}
    </span>
  </td>

  <td>
    {% if r.status == 'pending' %}
      
      <a href         = "{% url 'update_reservation_status' r.id 'accepted' %}"
         class        = "btn btn-success btn-sm me-1 btn-accept-reservation"
         data-status  = "accepted">
         ✅ {% trans "Accept" %}
      </a>

      <a href         = "{% url 'update_reservation_status' r.id 'rejected' %}"
         class        = "btn btn-danger btn-sm btn-reject-reservation"
         data-status  = "rejected">
         ❌ {% trans "Reject" %}
      </a>

    {% else %}
      <span class = "text-muted">{% trans "—" %}</span>
    {% endif %}
  </td>
</tr>
